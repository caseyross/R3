script.
	import Content from '../content/Content.pug'
	import Flair from '../media/Flair.pug'
	import SubredditTag from '../subreddit/SubredditTag.pug'
	export post = {}
	export showFlair = false
	export selected = false
	export select = () -> {}
	expanded = false
	onMousedown = ->
		expanded = true
		select(post)

button(class:stickied={post.isStickiedInThisChannel} class:selected={selected} on:mousedown={() => onMousedown()})
	.title
		.tag.type-icon
			{#if post.content}
				{#if post.content.type === 'link'}
					| ⟀
				{:else if post.content.type === 'self'}
					{#if post.content.selftext}
						| ⋅
					{:else}
						| ∴
				{:else if post.content.type === 'image'}
					{#if post.content.images.length > 1}
						| ⊞
					{:else}
						| ▫
				{:else if post.content.type === 'video'}
					| ‣
				{:else if post.content.type === 'embed'}
					| ⋗
				{:else if post.content.type === 'reddit'}
					| ⊙
		{#if showFlair}
			Flair(flair={post.titleFlair} subredditName={post.subredditName})
		{:else}
			SubredditTag(subreddit={post.subreddit})
		{#if post.content.type === 'link'}
			a(href={post.content.href}) {post.title}
		{:else}
			| {post.title}
	.tags
		time(datetime={post.createDate.toString()}).tag.age {post.createDate.ago().count}{post.createDate.ago().unit}
	{#if expanded}
		Content(content={post.content})

style.
	button
		position relative
		background var(--white)
		margin-top 1em
		margin-left 2em
		border-radius 1em
		padding 1em 2em
		text-align left
		&.stickied
			background green
			color white
		&:hover
		&:focus
			background #333
			color white
		&.selected
			background wheat
			color var(--black)
	.title
		display flex
		align-items flex-start
		gap 1ch
		font bold 18px Karla
	.tags
		position absolute
		top -0.5em
		left 0
		width 100%
		display flex
		justify-content space-between
	.tag
		padding 0 1ch
		border-radius 4px
	.age
		background darkseagreen
		color white
	.comment-count
		background wheat
	.score
		background salmon
		color white
	.type-icon
		display none
		justify-content center
		align-items center
script.
	export images = []
	i = 0
	KeyMap.KeyE =
		n: 'Media: Enlarge'
	KeyMap.KeyF =
		n: 'Media: Fullscreen'
	KeyMap.KeyO =
		n: 'Media: Open Original Source'
		d: () => window.open(images[i].url_full)
	KeyMap.KeyA =
		n: 'Gallery: Previous Image'
		d: () => if i > 0 then i -= 1
	KeyMap.KeyD =
		n: 'Gallery: Next Image'
		d: () => if i < images.length - 1 then i += 1

section.h-full.w-full.flex.flex-col
	menu.h-32.border-b-4.border-gray-300.flex.justify-center
		button.mx-4
			kbd A
			| back
		{#each images as image, j}
			img.mx-4.h-32.w-32.flex.justify-center(src={image.bestFit(32, 32).url} on:click={() => i = j})
		button.mx-4
			kbd D
			| next
	figure.flex.justify-center.items-center
		img(src={images[i].bestFit(800, 800).url})
		{#if images[i].caption}
			figcaption
				| {images[i].caption}
				{#if images[i].caption_url}
					a(href={images[i].caption_url})
						kbd L
						| {(new URL(images[i].caption_url)).hostname}
	menu.h-32.border-t-4.border-gray-300.flex.justify-center
		span {images[i].bestFit(800, 800).width} x {images[i].bestFit(800, 800).height} ({Math.trunc(100 * images[i].bestFit(800, 800).width / images[i].largest().width)}%)
		button
			kbd E
			| enlarge
		button
			kbd F
			| fullscreen
		a(href={images[i].largest().url} target='_blank' rel='noopener')
			kbd O
			| open original

style.
	figure
		height calc(100% - 64px)
script.
	import api from '../../../api/index.js'
	
	export icon_url = null
	export name = null
	export size = 'medium'

	if !icon_url
		subreddit = null
		api.loadWatch(api.ID('subreddit', name), (x) ->
			{ data: subreddit } = x
		)

a.subreddit-avatar(href='/{name}' style='border-color: {subreddit?.primary_color || subreddit?.key_color || "var(--c-text-strong)"}')
	{#if icon_url || subreddit?.community_icon || subreddit?.icon_img}
		img.subreddit-avatar-image(alt='' class='subreddit-avatar-image-size-{size}' decoding='async' fetchpriority='low' loading='lazy' src={icon_url || subreddit?.community_icon || subreddit?.icon_img})
	{:else}
		.subreddit-avatar-image.subreddit-avatar-image-not-available(class='subreddit-avatar-image-size-{size}')

style.
	.subreddit-avatar
		display inline-block
		border-radius 50%
		user-select none
	.subreddit-avatar-image
		aspect-ratio 1
		border-radius 50%
		object-fit cover
	.subreddit-avatar-image-not-available
		background gray
	.subreddit-avatar-image-size-large
		width 64px
	.subreddit-avatar-image-size-medium
		width 32px
	.subreddit-avatar-image-size-small
		width 16px
script.
	import api from '../../../api/index.js'
	import Comment from '../post/Comment.pug'
	import Headline from '../post/Headline.pug'
	import Post from '../post/Post.pug'
	export id = null
	itemIds = null
	loading = false
	selectedId = null
	api.watch(id, (x) ->
		{ data: itemIds, loading: loading } = x
		if itemIds and not selectedId then selectedId = itemIds[0]
	)

.listing
	nav
		.listing-information
			input.listing-name-input(placeholder='r/subreddit' type='text')
		{#if itemIds && itemIds.length}
			ol.listing-contents
				{#each itemIds as itemId}
					{#if api.parse.datasetType(itemId) === 'comment'}
						Comment(id={itemId})
					{:else if api.parse.datasetType(itemId) === 'post'}
						Headline(id={itemId} selected={selectedId == itemId} onSelect={() => selectedId = itemId})
	.listing-selected-item
		{#if selectedId}
			{#key selectedId}
				Post(id={selectedId})
style.
	.listing
		display grid
		grid-template-rows 100%
		grid-template-columns 40% 60%
		height 100vh
		width 100vw
	.listing-information
		border 1px solid
		flex 0 0 80px
	.listing-contents
		border-right 1px solid
		flex 1
		margin 0
		overflow hidden
		padding 0
	.listing-name-input
		background rgba(0,0,0,0.05)
		border-radius 1ch
		display none
		font-size 2em
		font-weight bold
		padding 1ch 2ch
		width 360px
	.listing-selected-item
		contain content
		height 100%
		overflow auto
		padding-left 48px
		padding-right 24px
	nav
		contain content
		display flex
		flex-flow column nowrap
		padding-left calc(100% - 320px)
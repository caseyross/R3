script.
	import PageUnavailable from '../../infra/PageUnavailable.pug'
	import PostList from '../listing/PostList.pug'
	import api from '../../../api/index.js'
	export name = null
	export sort = null
	export user_name = null
	error = null
	postIds = null
	api.watch(api.ID.dataset('multireddit_posts', user_name, name, sort, 10), (x) -> { data: postIds, error: error } = x)

svelte:head
	{#if user_name === 'r' && name === 'home'}
		title frontpage
	{:else}
		title multi: {user_name}/{name}
{#if error}
	{#if error instanceof api.errors.ConnectionFailedError || error instanceof api.errors.InvalidRequestError}
		PageUnavailable(path='/user/{user_name}/m/{name}')
{:else if postIds}
	PostList(ids={postIds} multireddit={true})
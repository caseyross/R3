script.
	import AuthorBadge from './AuthorBadge.pug'
	import ColoredTextButton from '../../materials/ColoredTextButton.pug'
	import HtmlMarkdown from '../../materials/HtmlMarkdown.pug'
	import datasets from '../../../api/datasets/store.coffee'
	export id = ''
	export showReplies = true
	comment = null
	datasets.subscribeToKey(id, (value) -> { data: comment } = value ? {})

{#if comment}
	article(role='comment')
		AuthorBadge(name={comment.author} distinguish={comment.distinguished} isOP={comment.is_submitter} flairText={comment.author_flair_text})
		HtmlMarkdown(html={comment.body_html})
		{#if showReplies && comment.replies.length > 0}
			ol
				{#each comment.replies as id}
					svelte:self(id={id})
				{#if comment.more_replies}
					ColoredTextButton(text='More replies...')
				{#if comment.deeper_replies}
					ColoredTextButton(text='Continue this thread...')

style.
	[role=comment]
		width 480px
	ol
		border-left 1px solid rgb(96,96,96) // Neutral 4-0
		padding-left 20px
		margin 5px
script.
	import { getContext } from 'svelte'

	import api from '../../../../api/index.js'

	import FeedLink from '../FeedLink.pug'
	import FormattedHTML from '../../common/FormattedHTML.pug'
	import MultiredditAvatar from './MultiredditAvatar.pug'
	import SubredditWidget from '../subreddit/SubredditWidget.pug'

	export multireddit_name = null
	export user_name = null
	
	multireddit = null
	set_theme_color = getContext('set_theme_color')
	subscribed_subreddits = null
	trending_subreddits = null

	api.loadWatch(api.ID('multireddit', user_name, multireddit_name), (x) ->
		{ data: multireddit } = x
		if multireddit
			set_theme_color(multireddit.key_color)
	)


{#if user_name !== 'r'}
	aside.multireddit-info
		header.multireddit-info-header
			MultiredditAvatar(multireddit_name={multireddit_name} user_name={user_name})
			address.multireddit-info-owner
				| by
				FeedLink(type='user' user_name={user_name})
		{#if multireddit}
			{#if multireddit.description_html}
				FormattedHTML(html={multireddit.description_html})
			{#if multireddit.subreddits}
				SubredditWidget(widget={{ data: multireddit.subreddits.map(x => ({ name: x })), kind: 'community-list', shortName: 'List of subreddits' }})

style.
	.multireddit-info
		display flex
		flex-flow column nowrap
		gap 1.333em
	.multireddit-info-header
		align-items center
		display flex
		gap 1ch
	.multireddit-info-owner
		color var(--c-text-weak)
		display flex
		gap 0.666em